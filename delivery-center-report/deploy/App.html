<!DOCTYPE html>
<html>
<head>
    <title>deliverycenterreport</title>

    <script type="text/javascript" src="/apps/2.0rc1/sdk.js"></script>

    <script type="text/javascript">
        Rally.onReady(function () {
                
                (function(){function only_once(fn){var called=!1;return function(){if(called)throw Error("Callback was already called.");called=!0,fn.apply(root,arguments)}}var async={},root,previous_async;root=this,null!=root&&(previous_async=root.async),async.noConflict=function(){return root.async=previous_async,async};var _each=function(arr,iterator){if(arr.forEach)return arr.forEach(iterator);for(var i=0;arr.length>i;i+=1)iterator(arr[i],i,arr)},_map=function(arr,iterator){if(arr.map)return arr.map(iterator);var results=[];return _each(arr,function(x,i,a){results.push(iterator(x,i,a))}),results},_reduce=function(arr,iterator,memo){return arr.reduce?arr.reduce(iterator,memo):(_each(arr,function(x,i,a){memo=iterator(memo,x,i,a)}),memo)},_keys=function(obj){if(Object.keys)return Object.keys(obj);var keys=[];for(var k in obj)obj.hasOwnProperty(k)&&keys.push(k);return keys};"undefined"!=typeof process&&process.nextTick?(async.nextTick=process.nextTick,async.setImmediate="undefined"!=typeof setImmediate?setImmediate:async.nextTick):"function"==typeof setImmediate?(async.nextTick=function(fn){setImmediate(fn)},async.setImmediate=async.nextTick):(async.nextTick=function(fn){setTimeout(fn,0)},async.setImmediate=async.nextTick),async.each=function(arr,iterator,callback){if(callback=callback||function(){},!arr.length)return callback();var completed=0;_each(arr,function(x){iterator(x,only_once(function(err){err?(callback(err),callback=function(){}):(completed+=1,completed>=arr.length&&callback(null))}))})},async.forEach=async.each,async.eachSeries=function(arr,iterator,callback){if(callback=callback||function(){},!arr.length)return callback();var completed=0,iterate=function(){iterator(arr[completed],function(err){err?(callback(err),callback=function(){}):(completed+=1,completed>=arr.length?callback(null):iterate())})};iterate()},async.forEachSeries=async.eachSeries,async.eachLimit=function(arr,limit,iterator,callback){var fn=_eachLimit(limit);fn.apply(null,[arr,iterator,callback])},async.forEachLimit=async.eachLimit;var _eachLimit=function(limit){return function(arr,iterator,callback){if(callback=callback||function(){},!arr.length||0>=limit)return callback();var completed=0,started=0,running=0;(function replenish(){if(completed>=arr.length)return callback();for(;limit>running&&arr.length>started;)started+=1,running+=1,iterator(arr[started-1],function(err){err?(callback(err),callback=function(){}):(completed+=1,running-=1,completed>=arr.length?callback():replenish())})})()}},doParallel=function(fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[async.each].concat(args))}},doParallelLimit=function(limit,fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[_eachLimit(limit)].concat(args))}},doSeries=function(fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[async.eachSeries].concat(args))}},_asyncMap=function(eachfn,arr,iterator,callback){var results=[];arr=_map(arr,function(x,i){return{index:i,value:x}}),eachfn(arr,function(x,callback){iterator(x.value,function(err,v){results[x.index]=v,callback(err)})},function(err){callback(err,results)})};async.map=doParallel(_asyncMap),async.mapSeries=doSeries(_asyncMap),async.mapLimit=function(arr,limit,iterator,callback){return _mapLimit(limit)(arr,iterator,callback)};var _mapLimit=function(limit){return doParallelLimit(limit,_asyncMap)};async.reduce=function(arr,memo,iterator,callback){async.eachSeries(arr,function(x,callback){iterator(memo,x,function(err,v){memo=v,callback(err)})},function(err){callback(err,memo)})},async.inject=async.reduce,async.foldl=async.reduce,async.reduceRight=function(arr,memo,iterator,callback){var reversed=_map(arr,function(x){return x}).reverse();async.reduce(reversed,memo,iterator,callback)},async.foldr=async.reduceRight;var _filter=function(eachfn,arr,iterator,callback){var results=[];arr=_map(arr,function(x,i){return{index:i,value:x}}),eachfn(arr,function(x,callback){iterator(x.value,function(v){v&&results.push(x),callback()})},function(err){callback(_map(results.sort(function(a,b){return a.index-b.index}),function(x){return x.value}))})};async.filter=doParallel(_filter),async.filterSeries=doSeries(_filter),async.select=async.filter,async.selectSeries=async.filterSeries;var _reject=function(eachfn,arr,iterator,callback){var results=[];arr=_map(arr,function(x,i){return{index:i,value:x}}),eachfn(arr,function(x,callback){iterator(x.value,function(v){v||results.push(x),callback()})},function(err){callback(_map(results.sort(function(a,b){return a.index-b.index}),function(x){return x.value}))})};async.reject=doParallel(_reject),async.rejectSeries=doSeries(_reject);var _detect=function(eachfn,arr,iterator,main_callback){eachfn(arr,function(x,callback){iterator(x,function(result){result?(main_callback(x),main_callback=function(){}):callback()})},function(err){main_callback()})};async.detect=doParallel(_detect),async.detectSeries=doSeries(_detect),async.some=function(arr,iterator,main_callback){async.each(arr,function(x,callback){iterator(x,function(v){v&&(main_callback(!0),main_callback=function(){}),callback()})},function(err){main_callback(!1)})},async.any=async.some,async.every=function(arr,iterator,main_callback){async.each(arr,function(x,callback){iterator(x,function(v){v||(main_callback(!1),main_callback=function(){}),callback()})},function(err){main_callback(!0)})},async.all=async.every,async.sortBy=function(arr,iterator,callback){async.map(arr,function(x,callback){iterator(x,function(err,criteria){err?callback(err):callback(null,{value:x,criteria:criteria})})},function(err,results){if(err)return callback(err);var fn=function(left,right){var a=left.criteria,b=right.criteria;return b>a?-1:a>b?1:0};callback(null,_map(results.sort(fn),function(x){return x.value}))})},async.auto=function(tasks,callback){callback=callback||function(){};var keys=_keys(tasks);if(!keys.length)return callback(null);var results={},listeners=[],addListener=function(fn){listeners.unshift(fn)},removeListener=function(fn){for(var i=0;listeners.length>i;i+=1)if(listeners[i]===fn)return listeners.splice(i,1),void 0},taskComplete=function(){_each(listeners.slice(0),function(fn){fn()})};addListener(function(){_keys(results).length===keys.length&&(callback(null,results),callback=function(){})}),_each(keys,function(k){var task=tasks[k]instanceof Function?[tasks[k]]:tasks[k],taskCallback=function(err){var args=Array.prototype.slice.call(arguments,1);if(1>=args.length&&(args=args[0]),err){var safeResults={};_each(_keys(results),function(rkey){safeResults[rkey]=results[rkey]}),safeResults[k]=args,callback(err,safeResults),callback=function(){}}else results[k]=args,async.setImmediate(taskComplete)},requires=task.slice(0,Math.abs(task.length-1))||[],ready=function(){return _reduce(requires,function(a,x){return a&&results.hasOwnProperty(x)},!0)&&!results.hasOwnProperty(k)};if(ready())task[task.length-1](taskCallback,results);else{var listener=function(){ready()&&(removeListener(listener),task[task.length-1](taskCallback,results))};addListener(listener)}})},async.waterfall=function(tasks,callback){if(callback=callback||function(){},tasks.constructor!==Array){var err=Error("First argument to waterfall must be an array of functions");return callback(err)}if(!tasks.length)return callback();var wrapIterator=function(iterator){return function(err){if(err)callback.apply(null,arguments),callback=function(){};else{var args=Array.prototype.slice.call(arguments,1),next=iterator.next();next?args.push(wrapIterator(next)):args.push(callback),async.setImmediate(function(){iterator.apply(null,args)})}}};wrapIterator(async.iterator(tasks))()};var _parallel=function(eachfn,tasks,callback){if(callback=callback||function(){},tasks.constructor===Array)eachfn.map(tasks,function(fn,callback){fn&&fn(function(err){var args=Array.prototype.slice.call(arguments,1);1>=args.length&&(args=args[0]),callback.call(null,err,args)})},callback);else{var results={};eachfn.each(_keys(tasks),function(k,callback){tasks[k](function(err){var args=Array.prototype.slice.call(arguments,1);1>=args.length&&(args=args[0]),results[k]=args,callback(err)})},function(err){callback(err,results)})}};async.parallel=function(tasks,callback){_parallel({map:async.map,each:async.each},tasks,callback)},async.parallelLimit=function(tasks,limit,callback){_parallel({map:_mapLimit(limit),each:_eachLimit(limit)},tasks,callback)},async.series=function(tasks,callback){if(callback=callback||function(){},tasks.constructor===Array)async.mapSeries(tasks,function(fn,callback){fn&&fn(function(err){var args=Array.prototype.slice.call(arguments,1);1>=args.length&&(args=args[0]),callback.call(null,err,args)})},callback);else{var results={};async.eachSeries(_keys(tasks),function(k,callback){tasks[k](function(err){var args=Array.prototype.slice.call(arguments,1);1>=args.length&&(args=args[0]),results[k]=args,callback(err)})},function(err){callback(err,results)})}},async.iterator=function(tasks){var makeCallback=function(index){var fn=function(){return tasks.length&&tasks[index].apply(null,arguments),fn.next()};return fn.next=function(){return tasks.length-1>index?makeCallback(index+1):null},fn};return makeCallback(0)},async.apply=function(fn){var args=Array.prototype.slice.call(arguments,1);return function(){return fn.apply(null,args.concat(Array.prototype.slice.call(arguments)))}};var _concat=function(eachfn,arr,fn,callback){var r=[];eachfn(arr,function(x,cb){fn(x,function(err,y){r=r.concat(y||[]),cb(err)})},function(err){callback(err,r)})};async.concat=doParallel(_concat),async.concatSeries=doSeries(_concat),async.whilst=function(test,iterator,callback){test()?iterator(function(err){return err?callback(err):(async.whilst(test,iterator,callback),void 0)}):callback()},async.doWhilst=function(iterator,test,callback){iterator(function(err){return err?callback(err):(test()?async.doWhilst(iterator,test,callback):callback(),void 0)})},async.until=function(test,iterator,callback){test()?callback():iterator(function(err){return err?callback(err):(async.until(test,iterator,callback),void 0)})},async.doUntil=function(iterator,test,callback){iterator(function(err){return err?callback(err):(test()?callback():async.doUntil(iterator,test,callback),void 0)})},async.queue=function(worker,concurrency){function _insert(q,data,pos,callback){data.constructor!==Array&&(data=[data]),_each(data,function(task){var item={data:task,callback:"function"==typeof callback?callback:null};pos?q.tasks.unshift(item):q.tasks.push(item),q.saturated&&q.tasks.length===concurrency&&q.saturated(),async.setImmediate(q.process)})}void 0===concurrency&&(concurrency=1);var workers=0,q={tasks:[],concurrency:concurrency,saturated:null,empty:null,drain:null,push:function(data,callback){_insert(q,data,!1,callback)},unshift:function(data,callback){_insert(q,data,!0,callback)},process:function(){if(q.concurrency>workers&&q.tasks.length){var task=q.tasks.shift();q.empty&&0===q.tasks.length&&q.empty(),workers+=1;var next=function(){workers-=1,task.callback&&task.callback.apply(task,arguments),q.drain&&0===q.tasks.length+workers&&q.drain(),q.process()},cb=only_once(next);worker(task.data,cb)}},length:function(){return q.tasks.length},running:function(){return workers}};return q},async.cargo=function(worker,payload){var working=!1,tasks=[],cargo={tasks:tasks,payload:payload,saturated:null,empty:null,drain:null,push:function(data,callback){data.constructor!==Array&&(data=[data]),_each(data,function(task){tasks.push({data:task,callback:"function"==typeof callback?callback:null}),cargo.saturated&&tasks.length===payload&&cargo.saturated()}),async.setImmediate(cargo.process)},process:function process(){if(!working){if(0===tasks.length)return cargo.drain&&cargo.drain(),void 0;var ts="number"==typeof payload?tasks.splice(0,payload):tasks.splice(0),ds=_map(ts,function(task){return task.data});cargo.empty&&cargo.empty(),working=!0,worker(ds,function(){working=!1;var args=arguments;_each(ts,function(data){data.callback&&data.callback.apply(null,args)}),process()})}},length:function(){return tasks.length},running:function(){return working}};return cargo};var _console_fn=function(name){return function(fn){var args=Array.prototype.slice.call(arguments,1);fn.apply(null,args.concat([function(err){var args=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(err?console.error&&console.error(err):console[name]&&_each(args,function(x){console[name](x)}))}]))}};async.log=_console_fn("log"),async.dir=_console_fn("dir"),async.memoize=function(fn,hasher){var memo={},queues={};hasher=hasher||function(x){return x};var memoized=function(){var args=Array.prototype.slice.call(arguments),callback=args.pop(),key=hasher.apply(null,args);key in memo?callback.apply(null,memo[key]):key in queues?queues[key].push(callback):(queues[key]=[callback],fn.apply(null,args.concat([function(){memo[key]=arguments;var q=queues[key];delete queues[key];for(var i=0,l=q.length;l>i;i++)q[i].apply(null,arguments)}])))};return memoized.memo=memo,memoized.unmemoized=fn,memoized},async.unmemoize=function(fn){return function(){return(fn.unmemoized||fn).apply(null,arguments)}},async.times=function(count,iterator,callback){for(var counter=[],i=0;count>i;i++)counter.push(i);return async.map(counter,iterator,callback)},async.timesSeries=function(count,iterator,callback){for(var counter=[],i=0;count>i;i++)counter.push(i);return async.mapSeries(counter,iterator,callback)},async.compose=function(){var fns=Array.prototype.reverse.call(arguments);return function(){var that=this,args=Array.prototype.slice.call(arguments),callback=args.pop();async.reduce(fns,args,function(newargs,fn,cb){fn.apply(that,newargs.concat([function(){var err=arguments[0],nextargs=Array.prototype.slice.call(arguments,1);cb(err,nextargs)}]))},function(err,results){callback.apply(that,[err].concat(results))})}};var _applyEach=function(eachfn,fns){var go=function(){var that=this,args=Array.prototype.slice.call(arguments),callback=args.pop();return eachfn(fns,function(fn,cb){fn.apply(that,args.concat([cb]))},callback)};if(arguments.length>2){var args=Array.prototype.slice.call(arguments,2);return go.apply(this,args)}return go};async.applyEach=doParallel(_applyEach),async.applyEachSeries=doSeries(_applyEach),async.forever=function(fn,callback){function next(err){if(err){if(callback)return callback(err);throw err}fn(next)}next()},"undefined"!=typeof define&&define.amd?define([],function(){return async}):"undefined"!=typeof module&&module.exports?module.exports=async:root.async=async})();
                var FIELD_DELIVERY_SATISFACTION="Deliverysatisfactionscore110",FIELD_REMARKS="c_Managementinformationrequest",FIELD_STATUS="Teamstatus",FIELD_LPC_VELOCITY="LPCVelocity",FIELD_TEAM_LIFECYCLE="TeamLifecycle",TEAM_LIFECYCLE_TO_HIDE=["Temporary","Not Started","Inactive"],THRESHOLD_VELOCITY=80,THRESHOLD_SATISFACTION=7;Ext.define("CustomApp",{extend:"Rally.app.App",componentCls:"app",title:"Delivery Center Status Report",version:"0.50",launch:function(){console.log("launch"),this.rows=[],this.showTable(),getIterations(this)},_toDate:function(ds){return new Date(Date.parse(ds))},leafNodeProjectIterations:function(iterations){var that=this,projectOids=_.pluck(iterations,function(i){return i.get("Project").ObjectID});projectOids=_.uniq(projectOids),async.map(projectOids,that.readProject,function(err,projects){iterations=_.filter(iterations,function(i){var p=_.find(projects,function(project){return project.get("ObjectID")==i.get("Project").ObjectID});return null==p.get("Children")||0==p.get("Children").Count}),that.processIterations(iterations)})},processIterations:function(data){var that=this,today=new Date,projectIterations=_.groupBy(data,function(iteration){var project=iteration.get("Project"),name=project.Name;return name}),keys=_.keys(projectIterations);keys=_.sortBy(keys,function(k){return k}),console.log("keys",keys),_.each(keys,function(key){var iterations=projectIterations[key];iterations=_.filter(iterations,function(iteration){var enddate=that._toDate(iteration.get("EndDate"));return today>enddate}),iterations=_.sortBy(iterations,function(iteration){return that._toDate(iteration.get("EndDate"))}),iterations=3>=iterations.length?iterations:iterations.slice(-3),iterations=iterations.reverse();var iterationIds=_.pluck(iterations,function(i){return i.get("ObjectID")});async.map(iterations,that.getIterationWorkItems,function(err,work_items){async.map(iterations,that.getSpecialStory,function(err,special_stories){that.processWorkItems(key,iterations,work_items,special_stories)})})})},getSpecialStory:function(iteration,callback){var that=this;Ext.create("Rally.data.WsapiDataStore",{limit:"Infinity",autoLoad:!0,model:"HierarchicalRequirement",filters:[{property:"Iteration.ObjectID",operator:"=",value:iteration.get("ObjectID")},{property:"Parent.Name",operator:"contains",value:"Iteration Reporting Parent"}],listeners:{load:function(store,data,success){callback(null,data)},scope:that},sorters:[{property:"CreationDate",direction:"ASC"}],fetch:["FormattedID","Name","PlanEstimate","ScheduleState","CreationDate",FIELD_DELIVERY_SATISFACTION,FIELD_REMARKS,FIELD_STATUS,FIELD_LPC_VELOCITY,FIELD_TEAM_LIFECYCLE]})},getIterationWorkItems:function(iteration,callback){var that=this;Ext.create("Rally.data.WsapiDataStore",{limit:"Infinity",autoLoad:!0,model:"UserStory",filters:[{property:"Iteration.ObjectID",operator:"=",value:iteration.get("ObjectID")}],listeners:{load:function(store,stories,success){Ext.create("Rally.data.WsapiDataStore",{limit:"Infinity",autoLoad:!0,model:"Defect",filters:[{property:"Iteration.ObjectID",operator:"=",value:iteration.get("ObjectID")}],listeners:{load:function(store,defects,success){var items=Ext.Array.push(stories,defects);callback(null,items)},scope:this}})},scope:this}})},readProject:function(pOid,callback){var that=this;Ext.create("Rally.data.WsapiDataStore",{limit:"Infinity",autoLoad:!0,fetch:!0,model:"Project",filters:[{property:"ObjectID",operator:"=",value:pOid}],listeners:{load:function(store,projects,success){callback(null,projects[0])},scope:this}})},getIterationResults:function(iteration,callback){var that=this;Ext.create("Rally.data.WsapiDataStore",{limit:"Infinity",autoLoad:!0,model:"IterationCumulativeFlowData",filters:[{property:"IterationObjectID",operator:"=",value:iteration.get("ObjectID")}],listeners:{load:function(store,data,success){callback(null,data)},scope:that},sorters:[{property:"CreationDate",direction:"ASC"}],fetch:["IterationObjectID","CardCount","CardEstimateTotal","CardState","CreationDate"]})},sumCFDForState:function(cfdRecs,state){var recs="*"==state?cfdRecs:_.filter(cfdRecs,function(cfd){return cfd.get("CardState")==state}),sum=_.reduce(recs,function(memo,cfd){return memo+cfd.get("CardEstimateTotal")},0);return sum},sumWIForState:function(items,state){var recs="*"==state?items:_.filter(items,function(item){return item.get("ScheduleState")==state}),sum=_.reduce(recs,function(memo,item){return memo+item.get("PlanEstimate")},0);return sum},countWIForState:function(items,state){var recs="*"==state?items:_.filter(items,function(item){return item.get("ScheduleState")==state}),count=recs.length;return count},countCFDForState:function(cfdRecs,state){var recs="*"==state?cfdRecs:_.filter(cfdRecs,function(cfd){return cfd.get("ScheduleState")==state}),count=_.reduce(recs,function(memo,cfd){return memo+cfdRecs.get("CardEstimateTotal")},0);return count},processWorkItems:function(team,iterations,work_items,special_stories){var that=this;_.each(iterations,function(iteration,index){var iteration_work_items=work_items[index],specialStory=null!==special_stories[index]&&special_stories[index].length>0?special_stories[index][0]:null,teamLifecycle=null!==specialStory?specialStory.get(FIELD_TEAM_LIFECYCLE):"";if(console.log("specialStory: ",specialStory),console.log("teamLifecycle: ",teamLifecycle),-1==TEAM_LIFECYCLE_TO_HIDE.indexOf(teamLifecycle)){var accepted=that.sumWIForState(iteration_work_items,"Accepted"),completed=accepted+that.sumWIForState(iteration_work_items,"Completed"),backlog=that.sumWIForState(iteration_work_items,"Backlog"),defined=that.sumWIForState(iteration_work_items,"Defined"),inprogress=that.sumWIForState(iteration_work_items,"In-Progress"),totalCount=that.countWIForState(iteration_work_items,"*"),acceptedCount=that.countWIForState(iteration_work_items,"Accepted"),completedCount=acceptedCount+that.countWIForState(iteration_work_items,"Completed"),lpcVelocity=null!==specialStory?specialStory.get(FIELD_LPC_VELOCITY):0,plannedVelocity=null!=iteration.get("PlannedVelocity")?iteration.get("PlannedVelocity"):0,targetUtilization=lpcVelocity>0?Math.round(100*(plannedVelocity/lpcVelocity)):0,velocityUtilization=plannedVelocity>0?Math.round(100*(accepted/plannedVelocity)):0,row={team:team,iteration:iteration.get("Name"),enddate:iteration.get("EndDate"),lpcVelocity:lpcVelocity,completedCount:completedCount,plannedVelocity:plannedVelocity,acceptedCount:acceptedCount,targetUtilization:targetUtilization,deliverySatisfaction:null!==specialStory?specialStory.get(FIELD_DELIVERY_SATISFACTION):"",remarks:null!==specialStory?specialStory.get(FIELD_REMARKS):"",status:null!==specialStory?specialStory.get(FIELD_STATUS):"",accepted:accepted,velocityUtilization:velocityUtilization};that.rows.push(row),that.store.load(),that.store.sort([{property:"team",direction:"ASC"},{property:"enddate",direction:"DESC"}])}})},showTable:function(){var me=this,height=500;this.store=Ext.create("Rally.data.custom.Store",{fields:[{name:"team",type:"string"},{name:"iteration",type:"string"},{name:"enddate",type:"date"},{name:"lpcVelocity",type:"number"},{name:"completedCount",type:"number"},{name:"plannedVelocity",type:"number"},{name:"acceptedCount",type:"number"},{name:"targetUtilization",type:"number"},{name:"deliverySatisfaction",type:"string"},{name:"remarks",type:"string"},{name:"status",type:"string"},{name:"accepted",type:"number"},{name:"velocityUtilization",type:"number"}],data:this.rows}),this.grid=Ext.create("Rally.ui.grid.Grid",{store:this.store,height:height,columnCfgs:[{text:"Team",dataIndex:"team"},{text:"Iteration",dataIndex:"iteration",flex:1.1},{text:"End Date",dataIndex:"enddate",flex:1.1,renderer:Ext.util.Format.dateRenderer()},{text:"LPC Velocity",dataIndex:"lpcVelocity",align:"center"},{text:"Target Velocity",dataIndex:"plannedVelocity",align:"center"},{text:"Accepted Points",dataIndex:"accepted",align:"center"},{text:"Target <br/>Utilization (%)",dataIndex:"targetUtilization",align:"center",renderer:this.renderVelocity},{text:"Velocity (%)",dataIndex:"velocityUtilization",align:"center",renderer:this.renderVelocity},{text:"Delivery Satisfaction",dataIndex:"deliverySatisfaction",align:"center",renderer:this.renderSatisfaction},{text:"Management information/request",dataIndex:"remarks",align:"center",tdCls:"wrap",flex:1},{text:"Status",dataIndex:"status",align:"center",renderer:this.renderStatus}],listeners:{afterrender:function(grid){grid.setHeight(me.getHeight()-20)}}}),this.add(this.grid)},renderVelocity:function(value,meta){return THRESHOLD_VELOCITY>value?(meta.style="background-color:red;color:white;",value):(meta.style="background-color:green;color:white;",value)},renderStatus:function(value,meta){return"Green"==value?(meta.style="background-color:green;color:white;",value):"Red"==value?(meta.style="background-color:red;color:white",value):"Yellow"==value?(meta.style="background-color:yellow",value):void 0},renderSatisfaction:function(value,meta){return value>=1&&THRESHOLD_SATISFACTION>=value?(meta.style="background-color:red;color:white;",value):value>THRESHOLD_SATISFACTION?(meta.style="background-color:green;color:white",value):void 0}});
                function addIterationTimeBox(app){var timeboxScope=app.getContext().getTimeboxScope();if(timeboxScope){var record=timeboxScope.getRecord(),name=record.get("Name");app.iterationSelected(name)}else{var container=Ext.create("Ext.container.Container",{itemId:"iterationDropDown",columnWidth:2});app.add(container),app.down("#iterationDropDown").add({xtype:"rallyiterationcombobox",itemId:"iterationSelector",listeners:{select:function(a,b,c){this.iterationSelected(b[0].get("Name"))},scope:app}})}}function getIterations(app){Ext.create("Rally.data.WsapiDataStore",{limit:"Infinity",autoLoad:!0,model:"Iteration",listeners:{load:function(store,data,success){this.leafNodeProjectIterations(data)},scope:app},fetch:["Name","Project","ObjectID","PlannedVelocity","StartDate","EndDate"]})}

            Rally.launchApp('CustomApp', {
                name:"deliverycenterreport",
	            parentRepos:""
            });

        });
    </script>


    <style type="text/css">
        .app {
     /* Add app styles here */
}

.wrap .x-grid-cell-inner {
    white-space: normal;
}

.red {
    background-color : red;
}

.green {
    background-color : green;
}
    </style>
</head>
<body></body>
</html>

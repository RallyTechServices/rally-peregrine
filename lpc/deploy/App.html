<!DOCTYPE html>
<html>
<head>
    <title>MyLPC</title>

    <script type="text/javascript" src="/apps/2.0rc1/sdk.js"></script>

    <script type="text/javascript">
        Rally.onReady(function () {
                Ext.override(Rally.ui.chart.Chart,{onRender:function(){this.callParent(arguments),this._unmask()}});
                Ext.define("CustomApp",{extend:"Rally.app.App",componentCls:"app",defaults:{padding:10,margin:5},title:"Lean Project Charter/Releae Predictability",version:"0.80",_debug:!0,_release_combo_box:null,_target_backlog_number_box:null,_project:null,_child_project_count:null,_iterations:[],_iteration_hash:{},_aligned_iteration_oids:[],_releases:[],_aligned_release_oids:[],_current_iteration:null,_current_iteration_index:null,_release_flow_hash:{},_asynch_return_flags:{},_velocities:{},_trend_data:{},_target_backlog:0,_chart_data:null,items:[{xtype:"container",itemId:"selector_box",layout:{type:"hbox"},defaults:{margin:5}},{xtype:"container",itemId:"chart_box"}],launch:function(){this._addReleaseSelector()},_kickOff:function(){this._log("restart"),this.down("#chart_box").removeAll(!0),this._asynch_return_flags={},this._findChildProjects()},_addReleaseSelector:function(){this._iterations=[],this._release_combo_box=Ext.create("Rally.ui.combobox.ReleaseComboBox",{xtype:"rallyreleasecombobox",listeners:{scope:this,change:function(rb,new_value,old_value){this._kickOff()},ready:function(rb){this._kickOff()}}}),this.down("#selector_box").add(this._release_combo_box)},_addTargetBacklogBox:function(){var me=this;me._target_backlog_number_box=Ext.create("Rally.ui.NumberField",{xtype:"rallynumberfield",fieldLabel:"Target Backlog (Story Points)",value:0}),this.down("#selector_box").add(me._target_backlog_number_box),this.down("#selector_box").add({xtype:"rallybutton",text:"Refresh",handler:function(){me._target_backlog=me._target_backlog_number_box.getValue(),me._kickOff()}})},_findChildProjects:function(){var me=this,project=this.getContext().getProject(),project_oid=project.ObjectID,project_model=Rally.data.ModelFactory.getModel({type:"Project",success:function(model){model.load(project_oid,{fetch:["Name","Children"],callback:function(result,operation){operation.wasSuccessful()&&(me._project=result,me._child_project_count=result.get("Children").Count),me._findIterationsForRelease()}})}})},_findAlignedReleases:function(){var me=this,this_release=this._release_combo_box.getRecord(),this_release_name=this_release.get("Name"),this_release_oid=this_release.get("ObjectID");this._aligned_release_oids.push(this_release_oid);var release_query=[{property:"Name",operator:"=",value:this_release_name}],release_store=Ext.create("Rally.data.WsapiDataStore",{model:"Release",autoLoad:!0,filters:release_query,sorters:[{property:"ReleaseDate",direction:"ASC"}],fetch:["ObjectID","Name","PlannedVelocity","ReleaseStartDate","ReleaseDate"],context:{projectScopeDown:!0},listeners:{scope:this,load:function(store,records){Ext.Array.each(records,function(release){var release_oid=release.get("ObjectID");-1===me._aligned_release_oids.indexOf(release_oid)&&me._checkReleaseAlignment(release)&&me._aligned_release_oids.push(release_oid)}),console.log("release oids:",me._aligned_release_oids),me._asynch_return_flags.aligned_releases=!0,me._findTodaysReleaseBacklog(),me._findReleaseBacklogAtEachIteration(),me._makeChart()}}})},_checkReleaseTimebox:function(parent_release,release){var parent_start_date=parent_release.get("ReleaseStartDate"),parent_release_date=parent_release.get("ReleaseDate"),start_date=release.get("ReleaseStartDate"),release_date=release.get("ReleaseDate");return start_date.getTime()===parent_start_date.getTime()&&release_date.getTime()===parent_release_date.getTime()},_checkReleaseAlignment:function(release){var parent_release=this._release_combo_box.getRecord();return parent_release?this._checkReleaseTimebox(parent_release,release):!1},_findCurrentIteration:function(){var me=this,today_date=new Date,current_release=this._release_combo_box.getRecord();if(today_date>current_release.get("ReleaseDate"))me._current_iteration=me._iterations[me._iterations.length-1];else{var counter=0,current_index=-1;Ext.Array.each(me._iterations,function(iteration){today_date>iteration.get("StartDate")&&iteration.get("EndDate")>today_date&&(current_index=counter,me._current_iteration_index=counter,me._current_iteration=iteration),counter++})}me._asynch_return_flags.current_iteration=!0,me._child_project_count>0?me._findAlignedReleases():(me._asynch_return_flags.aligned_releases=!0,me._findTodaysReleaseBacklog(),me._findReleaseBacklogAtEachIteration())},_checkIterationTimebox:function(parent_iteration,iteration){var parent_start_date=parent_iteration.get("StartDate"),parent_end_date=parent_iteration.get("EndDate"),start_date=iteration.get("StartDate"),end_date=iteration.get("EndDate");return start_date.getTime()===parent_start_date.getTime()&&end_date.getTime()===parent_end_date.getTime()},_checkIterationAlignment:function(iteration){var iteration_name=iteration.get("Name"),parent_iteration=this._iteration_hash[iteration_name];return parent_iteration?this._checkIterationTimebox(parent_iteration,iteration):!1},_findAlignedIterations:function(){var me=this,start_date_iso=Rally.util.DateTime.toIsoString(this._release_combo_box.getRecord().get("ReleaseStartDate"),!0),end_date_iso=Rally.util.DateTime.toIsoString(this._release_combo_box.getRecord().get("ReleaseDate"),!0);this._log("Find iterations between "+start_date_iso+" and "+end_date_iso);var iteration_query=[{property:"StartDate",operator:">=",value:start_date_iso},{property:"StartDate",operator:"<=",value:end_date_iso}],iteration_store=Ext.create("Rally.data.WsapiDataStore",{model:"Iteration",autoLoad:!0,filters:iteration_query,sorters:[{property:"EndDate",direction:"ASC"}],fetch:["ObjectID","Name","PlannedVelocity","StartDate","EndDate"],context:{projectScopeDown:!0},listeners:{scope:this,load:function(store,records){Ext.Array.each(records,function(iteration){var iteration_oid=iteration.get("ObjectID");-1===me._aligned_iteration_oids.indexOf(iteration_oid)&&me._checkIterationAlignment(iteration)&&me._aligned_iteration_oids.push(iteration_oid)}),me._asynch_return_flags.aligned_iterations=!0,me._findAcceptedItemsInEachIteration(),me._findCurrentIteration(),me._makeChart()}}})},_isAligned:function(iteration){var me=this,iteration_ref=Ext.create("Rally.util.Ref",iteration._ref),iteration_oid=iteration_ref.getOid(),is_aligned=!1;return is_aligned=-1!==me._aligned_iteration_oids.indexOf(iteration_oid)?!0:!1},_findIterationsForRelease:function(){var me=this;this._chart&&this._chart.destroy(),this._release_flow_hash={};var start_date_iso=Rally.util.DateTime.toIsoString(this._release_combo_box.getRecord().get("ReleaseStartDate"),!0),end_date_iso=Rally.util.DateTime.toIsoString(this._release_combo_box.getRecord().get("ReleaseDate"),!0);this._log("Find iterations between "+start_date_iso+" and "+end_date_iso);var start_query=Ext.create("Rally.data.QueryFilter",{property:"StartDate",operator:">=",value:start_date_iso}).and(Ext.create("Rally.data.QueryFilter",{property:"StartDate",operator:"<=",value:end_date_iso})),end_query=Ext.create("Rally.data.QueryFilter",{property:"EndDate",operator:">=",value:start_date_iso}).and(Ext.create("Rally.data.QueryFilter",{property:"EndDate",operator:"<=",value:end_date_iso})),iteration_query=start_query.or(end_query);this._log(["filter",""+iteration_query]);var iteration_store=Ext.create("Rally.data.WsapiDataStore",{model:"Iteration",autoLoad:!0,filters:iteration_query,sorters:[{property:"EndDate",direction:"ASC"}],fetch:["ObjectID","Name","PlannedVelocity","StartDate","EndDate"],context:{projectScopeDown:!1},listeners:{scope:this,load:function(store,records){me._iterations=records,Ext.Array.each(records,function(iteration){var iteration_name=iteration.get("Name"),iteration_oid=iteration.get("ObjectID");me._iteration_hash[iteration_name]=iteration,me._aligned_iteration_oids.push(iteration_oid)}),me._log(["me._iterations: ",me._iterations]),me._iterations.length>0?me._findAlignedIterations():me._noIterationsNotify(),me._asynch_return_flags.iterations=!0}}})},_findAcceptedItemsInEachIteration:function(){var me=this;me._log(["_findAcceptedItemsInEachIteration: me._iterations: ",me._iterations]);var iteration_query=[{property:"ScheduleState",operator:">=",value:"Accepted"},{property:"Release.Name",operator:"=",value:this._release_combo_box.getRecord().get("Name")}];this._velocities={},Ext.create("Rally.data.WsapiDataStore",{model:"UserStory",autoLoad:!0,filters:iteration_query,fetch:["Name","PlanEstimate","Iteration"],context:{projectScopeDown:!0},listeners:{scope:this,load:function(store,records){Ext.Array.each(records,function(record){if(record.get("Iteration")){var iteration=record.get("Iteration");if(me._isAligned(iteration)){var iteration_name=record.get("Iteration").Name;record.get("PlanEstimate")&&(me._velocities[iteration_name]===void 0&&(me._log("clearing velocity for "+iteration_name),me._velocities[iteration_name]=0),me._velocities[iteration_name]+=parseFloat(record.get("PlanEstimate"),10))}}}),this._asynch_return_flags.story_velocity=!0,this._makeChart()}}}),Ext.create("Rally.data.WsapiDataStore",{model:"Defect",autoLoad:!0,filters:iteration_query,fetch:["Name","PlanEstimate","Iteration"],context:{projectScopeDown:!0},listeners:{scope:this,load:function(store,records){Ext.Array.each(records,function(record){if(record.get("Iteration")){var iteration=record.get("Iteration");if(me._isAligned(iteration)){var iteration_name=record.get("Iteration").Name;record.get("PlanEstimate")&&(me._velocities[iteration_name]===void 0&&(me._log("clearing velocity for "+iteration_name),me._velocities[iteration_name]=0),me._velocities[iteration_name]+=parseFloat(record.get("PlanEstimate"),10))}}}),this._asynch_return_flags.defect_velocity=!0,this._makeChart()}}})},_findTodaysReleaseBacklog:function(){var me=this,this_release=this._release_combo_box.getRecord().get("ObjectID"),this_iteration=this._current_iteration;if(this_iteration){var this_iteration_end_date=this_iteration.get("EndDate"),this_iteration_end_iso_string=Rally.util.DateTime.toIsoString(this_iteration_end_date,!0).replace(/T.*$/,"");me._release_flow_hash[this_iteration_end_iso_string]=0;var release_filters=Ext.create("Rally.data.QueryFilter",{property:"Release.ObjectID",operator:"=",value:this_release});me._child_project_count>0&&Ext.Array.each(me._aligned_release_oids,function(release_oid){if(release_oid!==this_release){var this_filter=Ext.create("Rally.data.QueryFilter",{property:"Release.ObjectID",operator:"=",value:release_oid});release_filters=release_filters?release_filters.or(this_filter):this_filter}}),Ext.create("Rally.data.WsapiDataStore",{model:"UserStory",autoLoad:!0,filters:release_filters,fetch:["Name","PlanEstimate","Release","Iteration","CreationDate"],context:{projectScopeDown:!0},listeners:{scope:this,load:function(store,records){Ext.Array.each(records,function(record){var release=record.get("Release"),iteration=record.get("Iteration");record.get("PlanEstimate")&&!iteration&&me._isAligned(release)&&(me._release_flow_hash[this_iteration_end_iso_string]+=parseFloat(record.get("PlanEstimate"),10))}),this._asynch_return_flags.story_backlog_today=!0,this._makeChart()}}}),Ext.create("Rally.data.WsapiDataStore",{model:"Defect",autoLoad:!0,filters:release_filters,fetch:["Name","PlanEstimate","Release","Iteration","CreationDate"],context:{projectScopeDown:!0},listeners:{scope:this,load:function(store,records){Ext.Array.each(records,function(record){var release=record.get("Release"),iteration=record.get("Iteration");record.get("PlanEstimate")&&!iteration&&me._isAligned(release)&&(me._release_flow_hash[this_iteration_end_iso_string]+=parseFloat(record.get("PlanEstimate"),10))}),this._asynch_return_flags.defect_backlog_today=!0,this._makeChart()}}})}else this._asynch_return_flags.story_backlog_today=!0,this._asynch_return_flags.defect_backlog_today=!0},_adjustCardTime:function(card_date){var adjusted_date=Rally.util.DateTime.add(card_date,"hour",23);return adjusted_date=Rally.util.DateTime.add(adjusted_date,"minute",59),adjusted_date=Rally.util.DateTime.add(adjusted_date,"second",59)},_findReleaseBacklogAtEachIteration:function(){var me=this;me._release_flow=[];var this_release=this._release_combo_box.getRecord(),this_release_oid=this_release.get("ObjectID"),release_filters=Ext.create("Rally.data.QueryFilter",{property:"ReleaseObjectID",operator:"=",value:this_release_oid});me._child_project_count>0&&Ext.Array.each(me._aligned_release_oids,function(release_oid){if(release_oid!==this_release_oid){var this_filter=Ext.create("Rally.data.QueryFilter",{property:"ReleaseObjectID",operator:"=",value:release_oid});release_filters=release_filters?release_filters.or(this_filter):this_filter}}),Ext.create("Rally.data.WsapiDataStore",{model:"ReleaseCumulativeFlowData",autoLoad:!0,filters:release_filters,limit:5e3,listeners:{scope:this,load:function(store,cards){Ext.Array.each(cards,function(card){var card_creation_date=card.get("CreationDate"),adjusted_card_creation_date=me._adjustCardTime(card_creation_date),capture_date=Rally.util.DateTime.toIsoString(adjusted_card_creation_date,!0).replace(/T.*$/,""),plan_estimate=card.get("CardEstimateTotal");me._release_flow_hash[capture_date]||(me._release_flow_hash[capture_date]=0),me._release_flow_hash[capture_date]+=plan_estimate}),this._asynch_return_flags.flows=!0,console.log("release data",me._release_flow_hash),me._makeChart()}}})},_assembleSprintData:function(){var me=this,data={Name:[],IterationEndDate:[],TotalBacklog:[],TargetBacklog:[],PlannedVelocity:[],ActualVelocity:[],CumulativePlannedVelocity:[],CumulativeActualVelocity:[],OptimisticProjectedVelocity:[],PessimisticProjectedVelocity:[],ProjectedFinishOptimisticIndex:-1,ProjectedFinishPessimisticIndex:-1,MostRecentBacklog:0,BestHistoricalActualVelocity:0,WorstHistoricalActualVelocity:0,FirstPositiveVelocityIterationIndex:-1},current_iteration=this._current_iteration,current_iteration_end_date,current_release=this._release_combo_box.getRecord(),release_date=current_release.get("ReleaseDate"),today=new Date;current_iteration&&(current_iteration_end_date=this._current_iteration.get("EndDate"));var planned_velocity_adder=0,actual_velocity_adder=0,best_historical_actual_velocity=0,worst_historical_actual_velocity=0,most_recent_backlog=0,number_iterations=me._iterations.length,current_iteration_index=me._current_iteration_index;Ext.Array.each(me._iterations,function(iteration,iteration_index){var this_end_date=iteration.get("EndDate");data.IterationEndDate.push(this_end_date);var backlog=me._getBacklogOnEndOfIteration(iteration);backlog&&(most_recent_backlog=backlog),data.TotalBacklog.push(backlog);var planned_velocity=iteration.get("PlannedVelocity")||0;planned_velocity_adder+=planned_velocity;var actual_velocity=me._velocities[iteration.get("Name")]||0;actual_velocity_adder+=actual_velocity,actual_velocity>0&&-1===data.FirstPositiveVelocityIterationIndex&&(data.FirstPositiveVelocityIterationIndex=iteration_index),data.Name.push(iteration.get("Name")),data.PlannedVelocity.push(planned_velocity),data.ActualVelocity.push(actual_velocity),data.CumulativePlannedVelocity.push(planned_velocity_adder),this_end_date>current_iteration_end_date&&(actual_velocity_adder=null),data.CumulativeActualVelocity.push(actual_velocity_adder)}),data.MostRecentBacklog=most_recent_backlog,data.BestHistoricalActualVelocity=me._determineBestHistoricalActualVelocity(me._velocities),data.WorstHistoricalActualVelocity=me._determineWorstHistoricalActualVelocity(me._velocities),me._chart_data=data},_assembleProjectedData:function(){var me=this,data=this._chart_data,current_iteration=this._current_iteration,current_iteration_end_date,current_release=this._release_combo_box.getRecord(),release_date=current_release.get("ReleaseDate"),today=new Date;current_iteration&&(current_iteration_end_date=this._current_iteration.get("EndDate")),0===me._target_backlog&&(me._target_backlog=data.MostRecentBacklog),this._log(["data at this point",data]);var remaining_backlog=me._target_backlog-data.CumulativeActualVelocity[me._current_iteration_index],number_sprints_optimistic=Math.ceil(remaining_backlog/data.BestHistoricalActualVelocity),number_sprints_pessimistic=Math.ceil(remaining_backlog/data.WorstHistoricalActualVelocity);me._log(["number_sprints_optimistic: ",number_sprints_optimistic,"number_sprints_pessimistic: ",number_sprints_pessimistic]),data.ProjectedFinishOptimisticIndex=me._current_iteration_index+number_sprints_optimistic,data.ProjectedFinishPessimisticIndex=me._current_iteration_index+number_sprints_pessimistic;var number_iterations_in_release=this._iterations.length-me._current_iteration_index;if(me._log(["number_iterations_in_release: ",number_iterations_in_release]),number_sprints_pessimistic>=number_iterations_in_release&&remaining_backlog>0){number_sprints_pessimistic>number_iterations_in_release+5&&(number_sprints_pessimistic=number_iterations_in_release+5);var extra_sprints=number_sprints_pessimistic-number_iterations_in_release;me._log(["extra_sprints: ",extra_sprints]);for(var ending_cumulative_planned_velocity=data.CumulativePlannedVelocity[number_iterations_in_release-1],ending_planned_velocity=data.PlannedVelocity[number_iterations_in_release-1],planned_velocity_adder=ending_cumulative_planned_velocity,sprint_base_name=" Sprint",i=0;extra_sprints>=i;i++){var new_sprint_name="+ "+(i+1)+sprint_base_name;planned_velocity_adder+=ending_planned_velocity,data.Name.push(new_sprint_name),data.TotalBacklog.push(null),data.PlannedVelocity.push(null),data.ActualVelocity.push(null),data.CumulativeActualVelocity.push(null),data.CumulativePlannedVelocity.push(null)}}var optimistic_velocity_adder=data.CumulativeActualVelocity[me._current_iteration_index]-data.BestHistoricalActualVelocity,pessimistic_velocity_adder=data.CumulativeActualVelocity[me._current_iteration_index]-data.WorstHistoricalActualVelocity;Ext.Array.each(data.Name,function(iteration_name,iteration_index){var cumulative_optimistic_velocity=null,cumulative_pessimistic_velocity=null;iteration_index>=me._current_iteration_index&&remaining_backlog>0&&(pessimistic_velocity_adder+=data.WorstHistoricalActualVelocity,optimistic_velocity_adder+=data.BestHistoricalActualVelocity,release_date>today&&(cumulative_optimistic_velocity=optimistic_velocity_adder,cumulative_pessimistic_velocity=pessimistic_velocity_adder)),data.OptimisticProjectedVelocity.push(cumulative_optimistic_velocity),data.PessimisticProjectedVelocity.push(cumulative_pessimistic_velocity)}),me._chart_data=data},_getBacklogOnEndOfIteration:function(iteration){var backlog=null,iteration_end=Rally.util.DateTime.toIsoString(iteration.get("EndDate"),!0).replace(/T.*$/,"");return this._release_flow_hash[iteration_end]&&(backlog=this._release_flow_hash[iteration_end]),backlog},_isSelectedReleaseCurrent:function(){var today=new Date,this_release=this._release_combo_box.getRecord(),this_release_date=this_release.get("ReleaseDate"),this_release_start_date=this_release.get("ReleaseStartDate");return this._log(["_isSelectedReleaseCurrent",today>this_release_start_date&&this_release_date>=today]),today>this_release_start_date&&this_release_date>=today},_areBestWorstVelocityNonZero:function(){var data=this._chart_data;return data.BestHistoricalActualVelocity>0&&data.WorstHistoricalActualVelocity>0},_determineBestHistoricalActualVelocity:function(velocity_hash){var velocity=null,velocities=[],counter=0;for(var i in velocity_hash)velocity_hash[i]>0&&counter!==this._current_iteration_index&&velocities.push(velocity_hash[i]),counter++;if(velocities.length>0){var velocities_to_average=velocities;velocities.length>=3&&(velocities_to_average=Ext.Array.slice(velocities,-3)),velocity=Math.floor(Ext.Array.max(velocities_to_average)),this._log(["best",velocity_hash,velocities,velocities_to_average,velocity])}return velocity},_determineWorstHistoricalActualVelocity:function(velocity_hash){var velocity=null,velocities=[],counter=0;for(var i in velocity_hash)velocity_hash[i]>0&&counter!==this._current_iteration_index&&velocities.push(velocity_hash[i]),counter++;if(velocities.length>0){var velocities_to_average=Ext.Array.slice(velocities,-3);velocity=Math.floor(Ext.Array.min(velocities_to_average)),this._log(["worst",velocity_hash,velocities,velocities_to_average,velocity])}return velocity},_finished_all_asynchronous_calls:function(){var proceed=!0;return this._asynch_return_flags.flows||(this._log("Not yet received the release cumulative flow data"),proceed=!1),this._asynch_return_flags.iterations||(this._log("Not yet received the iteration timebox data"),proceed=!1),this._asynch_return_flags.story_velocity||(this._log("Not yet received the story velocity data"),proceed=!1),this._asynch_return_flags.defect_velocity||(this._log("Not yet received the defect velocity data"),proceed=!1),this._asynch_return_flags.story_backlog_today||(this._log("Not yet received today's story backlog"),proceed=!1),this._asynch_return_flags.defect_backlog_today||(this._log("Not yet received today's defect backlog"),proceed=!1),this._asynch_return_flags.aligned_releases||(this._log("Not yet received aligned releases"),proceed=!1),this._asynch_return_flags.aligned_iterations||(this._log("Not yet received aligned iterations"),proceed=!1),proceed},_getPlotLines:function(data){var plotlines=[];return Ext.Array.each(this._chart_data.Name,function(iteration,index){plotlines.push({color:"#c0c0c0",width:1,value:index})}),data.ProjectedFinishPessimisticIndex===data.ProjectedFinishOptimisticIndex&&data.ProjectedFinishPessimisticIndex>this._current_iteration_index?plotlines.push({color:"#0a0",width:2,value:data.ProjectedFinishPessimisticIndex,label:{text:"Projected Finish",style:{color:"#a00"}}}):(data.ProjectedFinishPessimisticIndex>this._current_iteration_index&&plotlines.push({color:"#a00",width:2,value:data.ProjectedFinishPessimisticIndex,label:{text:"Pessimistic Projected Finish",style:{color:"#a00"}}}),data.ProjectedFinishOptimisticIndex>this._current_iteration_index&&plotlines.push({color:"#0a0",width:2,value:data.ProjectedFinishOptimisticIndex,label:{text:"Optimistic Projected Finish",style:{color:"#0a0"}}})),plotlines},_makeChart:function(){var me=this;if(this._log("_makeChart"),this._finished_all_asynchronous_calls())if(0===this._iterations.length)this._chart=this.down("#chart_box").add({xtype:"container",html:"No iterations defined in the release bounds..."});else{this._assembleSprintData(),this._isSelectedReleaseCurrent()&&this._areBestWorstVelocityNonZero()&&this._assembleProjectedData(),this.down("#chart_box").removeAll(!0);var chart_hash=this._chart_data;console.log("chart_hash",chart_hash);var release_scope=[];_.each(chart_hash.TotalBacklog,function(b,i){var v=i>0?null!==b?b:_.last(release_scope):b;release_scope.push(v)}),console.log("release_scope",release_scope);var max=1.25*this._target_backlog;Ext.Array.max(chart_hash.OptimisticProjectedVelocity)>max&&(max=Ext.Array.max(chart_hash.OptimisticProjectedVelocity)),Ext.Array.max(chart_hash.CumulativePlannedVelocity)>max&&(max=Ext.Array.max(chart_hash.CumulativePlannedVelocity));var chart=Ext.create("Rally.ui.chart.Chart",{chartColors:["#B5D8EB","#5C9ACB","#6ab17d","#f47168"],chartData:{categories:chart_hash.Name,series:[{type:"column",data:chart_hash.CumulativeActualVelocity,name:"Actual Velocity",visible:!0},{type:"line",data:chart_hash.OptimisticProjectedVelocity,name:"Optimistic Projected Velocity",visible:!0,marker:{enabled:!1}},{type:"line",data:chart_hash.PessimisticProjectedVelocity,name:"Pessimistic Projected Velocity",color:"#0a0",visible:!0,marker:{enabled:!1}},{type:"line",data:release_scope,name:"Release Backlog",color:"#C0C0C0",visible:!0,marker:{enabled:!1}}]},height:350,chartConfig:{chart:{},title:{text:"",align:"center"},yAxis:[{max:max,title:{enabled:!0,text:"Story Points",style:{fontWeight:"normal"}},plotLines:[]}],xAxis:[{minorTickInterval:null,tickLength:0,categories:chart_hash.Name,plotLines:me._getPlotLines(chart_hash),labels:{rotation:-45,align:"right"}}]}});chart.setChartColors(["#5C9ACB","#6ab17d","#f47168"]),this.down("#chart_box").add(chart)}},_noIterationsNotify:function(){this._chart=this.down("#chart_box").add({xtype:"container",html:"No Iterations Defined for Release at this Scoping."})},_log:function(msg){window.console&&console.log(msg)}});

            Rally.launchApp('CustomApp', {
                name:"MyLPC",
	            parentRepos:""
            });

        });
    </script>


    <style type="text/css">
        
    </style>
</head>
<body>
</body>
</html>
